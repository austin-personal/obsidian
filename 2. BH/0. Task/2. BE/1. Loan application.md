## ==1. Click "Apply Loan"==
### 1.1 GET /codes
![[스크린샷 2025-05-29 오후 6.32.36.png]]
목적: 여러 코드 그룹에 대한 코드값(상수, 설명, 정책 등)을 한 번에 조회하여, 프론트엔드·앱·외부 시스템이 동적으로 코드 정보를 사용할 수 있게 하는 것입니다.
코드그룹: 코드(상수, 정책, 상태, 타입 등)를

### 1. 2 GET /loan/TC/TC_RL
![[temp_image_1748505261748.png]]
- payLater부터 SQL쿼리까지의 길이 없음 (하단 참고)
![[스크린샷 2025-05-29 오후 5.42.54.png]]
- **SqlSessionTemplate**파일을 못 찾음
	- **SqlSessionTemplate**은 직접 구현하는 클래스가 아니라,  
	    MyBatis-Spring에서 제공하는 외부 라이브러리 클래스입니다.
	- 실제 파일 경로는 아래와 같습니다:
	    - **패키지:** `org.mybatis.spring.SqlSessionTemplate`
	    - **소스:** [공식 GitHub](https://github.com/mybatis/spring/blob/master/src/main/java/org/mybatis/spring/SqlSessionTemplate.java)
	    - **jar 위치:** 보통 `mybatis-spring-*.jar` 안에 포함되어 빌드됩니다.
	- PayLater.xml에 쿼리가 저장되어있다.
		- 쿼리:
		```xml
<select id="selectLatestThirdPartyLoan" parameterType="map" resultType="io.tbal.business.domain.paylater.PayLater">

SELECT

<include refid="PAY_LATER_COLUMNS" />

FROM pay_later USE INDEX (ix_userid_paylatertype_paylaterid)

WHERE user_id = #{userId}

AND third_party_company = #{thirdPartyCompany}

AND pay_later_type IN ('TC_RL', 'TC_ICL', 'REPAY_LATER','TC_WL')

AND third_party_uid IS NOT NULL

ORDER BY pay_later_id DESC LIMIT 1;

</select>
```